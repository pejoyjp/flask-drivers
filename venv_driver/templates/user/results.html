{% extends "user/base.html" %}

{% block content %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap');

  .crazy-header {
    font-family: 'Indie Flower', cursive;
    text-transform: uppercase;
    font-size: 3rem;
    letter-spacing: 5px;
    text-shadow: 2px 2px #ff5722;
    color: #d32f2f;
    background-image: linear-gradient(45deg, #f3e5f5 25%, #ffe0b2 25%, #ffe0b2 50%, #f3e5f5 50%, #f3e5f5 75%, #ffe0b2 75%);
    background-size: 100px 100px;
    animation: slide 3s linear infinite;
  }

  @keyframes slide {
    from {
      background-position: 0 0;
    }
    to {
      background-position: 100px 0;
    }
  }

  .crazy-table th, .crazy-table td {
    background-color: #f9fbe7;
    border: 2px solid #ffeb3b;
    font-weight: bold;
    color: #f44336;
  }

  .highlighted {
    background-color: #f57f17 !important;
    animation: pulse 1s infinite;
  }

  @keyframes pulse {
    0% {
      transform: scale(1);
      opacity: 0.75;
    }
    50% {
      transform: scale(1.05);
      opacity: 1;
    }
    100% {
      transform: scale(1);
      opacity: 0.75;
    }
  }
</style>

<div class="container mt-4">
  <h3 class="mb-4 crazy-header">Driver Ranking </h3>
  <table class="table table-hover crazy-table">
      <thead class="thead-dark">
          <tr>
              <th scope="col" class="text-center">Rank</th>
              <th scope="col" class="text-center">Driver ID</th>
              <th scope="col" class="text-center">Name</th>
              <th scope="col" class="text-center">Car Model</th>
              <th scope="col" class="text-center">Course 1</th>
              <th scope="col" class="text-center">Course 2</th>
              <th scope="col" class="text-center">Course 3</th>
              <th scope="col" class="text-center">Course 4</th>
              <th scope="col" class="text-center">Course 5</th>
              <th scope="col" class="text-center">Course 6</th>
              <th scope="col" class="text-center">Overall Result</th>
          </tr>
      </thead>
      <tbody>
          {% for r in results %}
              <tr class="{% if loop.index == 1 %}highlighted{% endif %}">
                  <td class="text-center">{{ rank_to_medal(loop.index) }}</td>
                  <td class="text-center">{{ r[0] }}</td>
                  <td class="text-center">{{ r[1] }} {{ r[2] }}{% if r[4] and r[4] <= 18 %}(J){% endif %}</td>
                  <td class="text-center">{{ r[3] }}</td>
                  <td class="text-center">{{ "{:.2f}".format(r[5]) if r[5] is not none else 'N/A' }}</td>
                  <td class="text-center">{{ "{:.2f}".format(r[6]) if r[6] is not none else 'N/A' }}</td>
                  <td class="text-center">{{ "{:.2f}".format(r[7]) if r[7] is not none else 'N/A' }}</td>
                  <td class="text-center">{{ "{:.2f}".format(r[8]) if r[8] is not none else 'N/A' }}</td>
                  <td class="text-center">{{ "{:.2f}".format(r[9]) if r[9] is not none else 'N/A' }}</td>
                  <td class="text-center">{{ "{:.2f}".format(r[10]) if r[10] is not none else 'N/A' }}</td>
                  <td class="text-center">{{ "{:.2f}".format(r[11]) if r[11] is not none else 'N/A' }}</td>
              </tr>
          {% endfor %}
      </tbody>
  </table>
</div>
{% endblock %}
